<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:PHTV.Windows.ViewModels"
             x:Class="PHTV.Windows.Views.Tabs.MacroTabView"
             x:DataType="vm:MacroTabViewModel">
  <ScrollViewer VerticalScrollBarVisibility="Auto">
    <StackPanel Margin="32,54,32,32" Spacing="20" MaxWidth="760">
      <Border Classes="settings-header">
        <Grid ColumnDefinitions="*,Auto">
          <StackPanel Spacing="4">
            <TextBlock Classes="settings-header-title" Text="{Binding Title}"/>
            <TextBlock Classes="settings-header-subtitle" Text="{Binding Subtitle}" TextWrapping="Wrap"/>
          </StackPanel>
          <StackPanel Grid.Column="1" Spacing="6" HorizontalAlignment="Right">
            <Border Classes="status-pill">
              <TextBlock Classes="status-pill-text" Text="{Binding State.UseMacro, StringFormat='Tráº¡ng thÃ¡i: {0}'}"/>
            </Border>
            <Border Classes="status-pill">
              <TextBlock Classes="status-pill-text" Text="{Binding State.Macros.Count, StringFormat='Tá»•ng: {0}'}"/>
            </Border>
          </StackPanel>
        </Grid>
      </Border>

      <Border Classes="settings-card">
        <StackPanel>
          <Border Classes="settings-card-header">
            <Grid ColumnDefinitions="40,*">
              <Border Classes="settings-card-icon"><TextBlock Classes="settings-card-icon-text" Text="âœŽ"/></Border>
              <StackPanel Grid.Column="1" Spacing="2">
                <TextBlock Classes="settings-card-title" Text="Thiáº¿t láº­p gÃµ táº¯t"/>
                <TextBlock Classes="settings-card-subtitle" Text="Báº­t/táº¯t vÃ  cáº¥u hÃ¬nh hÃ nh vi má»Ÿ rá»™ng"/>
              </StackPanel>
            </Grid>
          </Border>

          <StackPanel Margin="16" Spacing="8">
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="Báº­t gÃµ táº¯t"/><TextBlock Classes="settings-row-subtitle" Text="Cho phÃ©p má»Ÿ rá»™ng tá»« viáº¿t táº¯t"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.UseMacro}"/></Grid>
            <Border Classes="settings-divider"/>
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="GÃµ táº¯t trong cháº¿ Ä‘á»™ tiáº¿ng Anh"/><TextBlock Classes="settings-row-subtitle" Text="Má»Ÿ rá»™ng ngay cáº£ khi á»Ÿ English mode"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.UseMacroInEnglishMode}"/></Grid>
            <Border Classes="settings-divider"/>
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="Tá»± Ä‘á»™ng viáº¿t hoa macro"/><TextBlock Classes="settings-row-subtitle" Text="Btw â†’ By the way, BTW â†’ BY THE WAY"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.AutoCapsMacro}"/></Grid>
          </StackPanel>
        </StackPanel>
      </Border>

      <Grid ColumnDefinitions="5*,7*">
        <Border Classes="settings-card" Grid.Column="0" Margin="0,0,8,0">
          <StackPanel>
            <Border Classes="settings-card-header">
              <Grid ColumnDefinitions="40,*" RowDefinitions="Auto,Auto">
                <Border Classes="settings-card-icon">
                  <TextBlock Classes="settings-card-icon-text" Text="ðŸ“"/>
                </Border>
                <StackPanel Grid.Column="1" Spacing="2">
                  <TextBlock Classes="settings-card-title" Text="Danh má»¥c"/>
                  <TextBlock Classes="settings-card-subtitle" Text="NhÃ³m gÃµ táº¯t theo chá»§ Ä‘á»"/>
                </StackPanel>
                <WrapPanel Grid.Row="1" Grid.ColumnSpan="2" Classes="settings-actions" Margin="0,12,0,0">
                  <Button Content="ThÃªm"
                          Command="{Binding DataContext.AddCategoryCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                  <Button Content="Sá»­a"
                          Command="{Binding DataContext.EditCategoryCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                </WrapPanel>
              </Grid>
            </Border>

            <ListBox Margin="12"
                     ItemsSource="{Binding State.Categories}"
                     SelectedItem="{Binding State.SelectedCategory}"
                     MinHeight="180"/>
          </StackPanel>
        </Border>

        <Border Classes="settings-card" Grid.Column="1" Margin="8,0,0,0">
          <StackPanel>
            <Border Classes="settings-card-header">
              <Grid ColumnDefinitions="40,*" RowDefinitions="Auto,Auto">
                <Border Classes="settings-card-icon">
                  <TextBlock Classes="settings-card-icon-text" Text="â˜°"/>
                </Border>
                <StackPanel Grid.Column="1" Spacing="2">
                  <TextBlock Classes="settings-card-title" Text="Danh sÃ¡ch gÃµ táº¯t"/>
                  <TextBlock Classes="settings-card-subtitle" Text="Quáº£n lÃ½ vÃ  tÃ¬m nhanh theo danh má»¥c"/>
                </StackPanel>
                <WrapPanel Grid.Row="1" Grid.ColumnSpan="2" Classes="settings-actions" Margin="0,12,0,0">
                  <Button Content="ThÃªm"
                          Command="{Binding DataContext.AddMacroCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                  <Button Content="Sá»­a"
                          Command="{Binding DataContext.EditMacroCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                  <Button Content="XÃ³a"
                          Command="{Binding DataContext.DeleteMacroCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                  <Button Content="Xuáº¥t"
                          Command="{Binding DataContext.ExportMacrosCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                  <Button Content="Nháº­p"
                          Command="{Binding DataContext.ImportMacrosCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                </WrapPanel>
              </Grid>
            </Border>

            <ListBox Margin="12"
                     ItemsSource="{Binding State.Macros}"
                     SelectedItem="{Binding State.SelectedMacro}"
                     MinHeight="180">
              <ListBox.ItemTemplate>
                <DataTemplate x:DataType="vm:MacroEntry">
                  <Border Classes="macro-item-card" Padding="8" CornerRadius="8" Margin="0,0,0,6">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                      <TextBlock Text="{Binding Shortcut}" FontFamily="Consolas" FontWeight="SemiBold"/>
                      <TextBlock Grid.Column="1" Margin="10,0,0,0" Text="{Binding Content}" TextWrapping="Wrap"/>
                      <TextBlock Grid.Column="2"
                                 Classes="macro-item-category"
                                 Margin="10,0,0,0"
                                 Text="{Binding Category}"
                                 HorizontalAlignment="Right"
                                 TextTrimming="CharacterEllipsis"
                                 MaxWidth="140"/>
                    </Grid>
                  </Border>
                </DataTemplate>
              </ListBox.ItemTemplate>
            </ListBox>
          </StackPanel>
        </Border>
      </Grid>
    </StackPanel>
  </ScrollViewer>
</UserControl>
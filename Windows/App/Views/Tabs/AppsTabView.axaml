<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="PHTV.Windows.Views.Tabs.AppsTabView"
             xmlns:vm="using:PHTV.Windows.ViewModels"
             x:DataType="vm:AppsTabViewModel">
  <ScrollViewer VerticalScrollBarVisibility="Auto">
    <StackPanel Margin="32,54,32,32" Spacing="20" MaxWidth="760">
      <Border Classes="settings-header">
        <Grid ColumnDefinitions="*,Auto">
          <StackPanel Spacing="4">
            <TextBlock Classes="settings-header-title" Text="{Binding Title}"/>
            <TextBlock Classes="settings-header-subtitle" Text="{Binding Subtitle}" TextWrapping="Wrap"/>
          </StackPanel>
          <StackPanel Grid.Column="1" Spacing="6" HorizontalAlignment="Right">
            <Border Classes="status-pill"><TextBlock Classes="status-pill-text" Text="{Binding State.ExcludedApps.Count, StringFormat='Loáº¡i trá»«: {0}'}"/></Border>
            <Border Classes="status-pill"><TextBlock Classes="status-pill-text" Text="{Binding State.SendKeyStepByStep, StringFormat='Gá»­i theo tá»«ng phÃ­m: {0}'}"/></Border>
          </StackPanel>
        </Grid>
      </Border>

      <!-- Smart Switch -->
      <Border Classes="settings-card">
        <StackPanel>
          <Border Classes="settings-card-header teal">
            <Grid ColumnDefinitions="40,*">
              <Border Classes="settings-card-icon"><TextBlock Classes="settings-card-icon-text" Text="âŒ¬"/></Border>
              <StackPanel Grid.Column="1" Spacing="2"><TextBlock Classes="settings-card-title" Text="Chuyá»ƒn Ä‘á»•i theo á»©ng dá»¥ng"/><TextBlock Classes="settings-card-subtitle" Text="Tá»± chuyá»ƒn Viá»‡t/Anh vÃ  ghi nhá»› báº£ng mÃ£"/></StackPanel>
            </Grid>
          </Border>
          <StackPanel Margin="16" Spacing="8">
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="Tá»± chuyá»ƒn theo á»©ng dá»¥ng"/><TextBlock Classes="settings-row-subtitle" Text="Tá»± Ä‘á»™ng Ä‘á»•i Viá»‡t/Anh theo app"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.UseSmartSwitchKey}"/></Grid>
            <Border Classes="settings-divider"/>
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="Ghi nhá»› báº£ng mÃ£"/><TextBlock Classes="settings-row-subtitle" Text="LÆ°u báº£ng mÃ£ riÃªng cho tá»«ng á»©ng dá»¥ng"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.RememberCode}"/></Grid>
          </StackPanel>
        </StackPanel>
      </Border>

      <Grid ColumnDefinitions="*,*">
        <!-- Excluded Apps -->
        <Border Classes="settings-card" Grid.Column="0" Margin="0,0,8,0">
          <StackPanel>
            <Border Classes="settings-card-header teal">
              <Grid ColumnDefinitions="40,*" RowDefinitions="Auto,Auto">
                <Border Classes="settings-card-icon"><TextBlock Classes="settings-card-icon-text" Text="âŠ˜"/></Border>
                <StackPanel Grid.Column="1" Spacing="2">
                  <TextBlock Classes="settings-card-title" Text="Loáº¡i trá»« á»©ng dá»¥ng"/>
                  <TextBlock Classes="settings-card-subtitle" Text="Tá»± chuyá»ƒn sang English"/>
                </StackPanel>
                <WrapPanel Grid.Row="1" Grid.ColumnSpan="2" Classes="settings-actions" Margin="0,12,0,0">
                  <Button Content="ThÃªm" Command="{Binding DataContext.AddExcludedAppCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                  <Button Content="XÃ³a" Command="{Binding DataContext.RemoveExcludedAppCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                </WrapPanel>
              </Grid>
            </Border>
            <ListBox Margin="12" ItemsSource="{Binding State.ExcludedApps}" SelectedItem="{Binding State.SelectedExcludedApp}" MinHeight="170">
              <ListBox.ItemTemplate>
                <DataTemplate>
                  <Border Classes="list-row">
                    <Grid ColumnDefinitions="Auto, *, Auto">
                      <TextBlock Text="ðŸ“±" VerticalAlignment="Center" Opacity="0.5" FontSize="14"/>
                      <TextBlock Grid.Column="1" Text="{Binding}" Margin="10,0" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                      <TextBlock Grid.Column="2" Classes="chevron-right" Text="îŠµ"/>
                    </Grid>
                  </Border>
                </DataTemplate>
              </ListBox.ItemTemplate>
            </ListBox>
          </StackPanel>
        </Border>

        <!-- Step by Step Apps -->
        <Border Classes="settings-card" Grid.Column="1" Margin="8,0,0,0">
          <StackPanel>
            <Border Classes="settings-card-header teal">
              <Grid ColumnDefinitions="40,*" RowDefinitions="Auto,Auto">
                <Border Classes="settings-card-icon"><TextBlock Classes="settings-card-icon-text" Text="âŒ"/></Border>
                <StackPanel Grid.Column="1" Spacing="2">
                  <TextBlock Classes="settings-card-title" Text="Gá»­i tá»«ng phÃ­m"/>
                  <TextBlock Classes="settings-card-subtitle" Text="Auto báº­t cháº¿ Ä‘á»™ gá»­i an toÃ n"/>
                </StackPanel>
                <WrapPanel Grid.Row="1" Grid.ColumnSpan="2" Classes="settings-actions" Margin="0,12,0,0">
                  <Button Content="ThÃªm" Command="{Binding DataContext.AddStepByStepAppCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                  <Button Content="XÃ³a" Command="{Binding DataContext.RemoveStepByStepAppCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                </WrapPanel>
              </Grid>
            </Border>
            <ListBox Margin="12" ItemsSource="{Binding State.StepByStepApps}" SelectedItem="{Binding State.SelectedStepByStepApp}" MinHeight="170">
              <ListBox.ItemTemplate>
                <DataTemplate>
                  <Border Classes="list-row">
                    <Grid ColumnDefinitions="Auto, *, Auto">
                      <TextBlock Text="âŒ¨" VerticalAlignment="Center" Opacity="0.5" FontSize="14"/>
                      <TextBlock Grid.Column="1" Text="{Binding}" Margin="10,0" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                      <TextBlock Grid.Column="2" Classes="chevron-right" Text="îŠµ"/>
                    </Grid>
                  </Border>
                </DataTemplate>
              </ListBox.ItemTemplate>
            </ListBox>
          </StackPanel>
        </Border>
      </Grid>

      <Border Classes="settings-card">
        <StackPanel>
          <Border Classes="settings-card-header teal">
            <Grid ColumnDefinitions="40,*">
              <Border Classes="settings-card-icon"><TextBlock Classes="settings-card-icon-text" Text="â—ˆ"/></Border>
              <StackPanel Grid.Column="1" Spacing="2"><TextBlock Classes="settings-card-title" Text="TÆ°Æ¡ng thÃ­ch nÃ¢ng cao"/><TextBlock Classes="settings-card-subtitle" Text="TÃ¹y chá»n cho app vÃ  bá»‘ cá»¥c Ä‘áº·c biá»‡t"/></StackPanel>
            </Grid>
          </Border>
          <StackPanel Margin="16" Spacing="8">
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="Báº­t gá»­i theo tá»«ng phÃ­m"/><TextBlock Classes="settings-row-subtitle" Text="Gá»­i tá»«ng kÃ½ tá»± má»™t (cháº­m nhÆ°ng á»•n Ä‘á»‹nh)"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.SendKeyStepByStep}"/></Grid>
            <Border Classes="settings-divider"/>
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="TÆ°Æ¡ng thÃ­ch bá»‘ cá»¥c bÃ n phÃ­m"/><TextBlock Classes="settings-row-subtitle" Text="Há»— trá»£ Dvorak, Colemak"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.PerformLayoutCompat}"/></Grid>
            <Border Classes="settings-divider"/>
            <Grid ColumnDefinitions="*,Auto"><StackPanel Spacing="2"><TextBlock Classes="settings-row-title" Text="Safe Mode"/><TextBlock Classes="settings-row-subtitle" Text="Tá»± phá»¥c há»“i khi API há»‡ thá»‘ng khÃ´ng á»•n Ä‘á»‹nh"/></StackPanel><ToggleSwitch Grid.Column="1" IsChecked="{Binding State.SafeMode}"/></Grid>
          </StackPanel>
        </StackPanel>
      </Border>
    </StackPanel>
  </ScrollViewer>
</UserControl>
